# 07-1: Asynchronous Concepts (‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö Async) ‚è≥

> **"Asynchronous programming is about what happens when part of your program runs now and part runs later."**
> ‚Äî *Kyle Simpson (You Don't Know JS)*

‡∏ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å Module ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤ ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ **‡∏ó‡∏≥‡∏ó‡∏µ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏Ñ‡πà‡∏≠‡∏¢‡∏ó‡∏≥‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ï‡πà‡∏≠‡πÑ‡∏õ** ‚Äî ‡∏ô‡∏±‡πà‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ **Synchronous** ‡πÅ‡∏ï‡πà‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏à‡∏£‡∏¥‡∏á ‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà **‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠** (‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•, ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå, ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤) ‡∏ñ‡πâ‡∏≤‡∏£‡∏≠‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏∞ **‡πÅ‡∏Ç‡πá‡∏á** ‡πÑ‡∏õ‡πÄ‡∏•‡∏¢!

> **üí° Analogy (‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö):**
> - **Synchronous** = **‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏∑‡∏ô‡∏£‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏≤‡∏ô‡πå‡πÄ‡∏ï‡∏≠‡∏£‡πå** üßç ‡∏à‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ñ‡∏∂‡∏á‡∏Ñ‡πà‡∏≠‡∏¢‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô
> - **Asynchronous** = **‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏±‡πà‡∏á‡∏£‡∏≠‡∏ó‡∏µ‡πà‡πÇ‡∏ï‡πä‡∏∞** üí∫ ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠‡∏Å‡πá‡πÄ‡∏•‡πà‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ‡∏ï‡∏≠‡∏ö‡πÑ‡∏•‡∏ô‡πå‡πÑ‡∏î‡πâ ‡∏û‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏Ç‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏£‡∏≤‡πÑ‡∏õ‡∏£‡∏±‡∏ö

---

## 1. Synchronous vs Asynchronous üîÑ

### Synchronous (‡∏ó‡∏≥‡∏ó‡∏µ‡∏•‡∏∞‡∏≠‡∏¢‡πà‡∏≤‡∏á ‚Äî Block!):

```javascript
console.log("1. ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ üçú");
console.log("2. ‡∏£‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£... ‚è≥ (Block! ‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ)");
console.log("3. ‡πÑ‡∏î‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£! ‡∏Å‡∏¥‡∏ô üçΩÔ∏è");
console.log("4. ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô üí∞");
// Output: 1 ‚Üí 2 ‚Üí 3 ‚Üí 4 (‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö)
```

### Asynchronous (‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô):

```javascript
console.log("1. ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£ üçú");

setTimeout(() => {
    console.log("3. ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß! üçΩÔ∏è");
}, 3000); // ‡∏£‡∏≠ 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà Block!)

console.log("2. ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏≠... ‡πÄ‡∏•‡πà‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ üì±");

// Output: 1 ‚Üí 2 ‚Üí 3 (‡∏Ç‡πâ‡∏≠ 2 ‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô 3!)
```

### üìä Sync vs Async

| | **Synchronous** | **Asynchronous** |
|:--|:---------------|:-----------------|
| **‡∏ó‡∏≥‡∏á‡∏≤‡∏ô** | ‡∏ó‡∏µ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î | ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô |
| **Blocking** | ‚úÖ Block (‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠) | ‚ùå ‡πÑ‡∏°‡πà Block |
| **‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö** | ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÜ (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì) | ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠ (Network, Timer, File) |
| **‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á** | `Math.sqrt(4)` | `fetch()`, `setTimeout()`, `readFile()` |

---

## 2. The Event Loop ‚Äî ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á Async! üîÑ

‡∏ï‡∏≤‡∏° [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Event_loop):

JavaScript ‡πÄ‡∏õ‡πá‡∏ô **Single-Threaded** (‡∏°‡∏µ‡πÅ‡∏Ñ‡πà 1 ‡∏Ñ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô) ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏ó‡∏≥ Async ‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏µ **Event Loop**!

### ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Call Stack üìö          ‚îÇ ‚Üê ‡∏Å‡∏≠‡∏á‡∏á‡∏≤‡∏ô (‡∏ó‡∏≥‡∏ó‡∏µ‡∏•‡∏∞‡∏≠‡∏±‡∏ô LIFO)
‚îÇ   (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚îÇ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡∏á‡∏≤‡∏ô Async ‚Üí ‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÉ‡∏´‡πâ Web APIs
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Web APIs üåê            ‚îÇ ‚Üê Browser ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ (Timer, Fetch, DOM Events)
‚îÇ   setTimeout, fetch, etc.     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚îÇ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à ‚Üí ‡∏™‡πà‡∏á Callback ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Queue
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     Callback Queue üì¨        ‚îÇ ‚Üê ‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠ (‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å)
‚îÇ   (Macro Tasks: setTimeout)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚îÇ Event Loop: ‡∏ñ‡πâ‡∏≤ Call Stack ‡∏ß‡πà‡∏≤‡∏á ‚Üí ‡∏´‡∏¢‡∏¥‡∏ö‡∏à‡∏≤‡∏Å Queue ‡∏°‡∏≤‡∏ó‡∏≥
           ‚ñº
       üîÑ Event Loop
    "Call Stack ‡∏ß‡πà‡∏≤‡∏á‡∏¢‡∏±‡∏á? ‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß? ‡πÄ‡∏≠‡∏≤‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å Queue ‡∏°‡∏≤!"
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô:

```javascript
console.log("A");           // 1Ô∏è‚É£ ‚Üí Call Stack ‚Üí ‡∏û‡∏¥‡∏°‡∏û‡πå "A" ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

setTimeout(() => {
    console.log("B");       // 3Ô∏è‚É£ ‚Üí Callback Queue ‚Üí ‡∏£‡∏≠ Call Stack ‡∏ß‡πà‡∏≤‡∏á
}, 0);                      // ‡πÅ‡∏°‡πâ 0ms ‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠!

console.log("C");           // 2Ô∏è‚É£ ‚Üí Call Stack ‚Üí ‡∏û‡∏¥‡∏°‡∏û‡πå "C" ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

// Output: A ‚Üí C ‚Üí B
// ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà A ‚Üí B ‚Üí C! ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ setTimeout ‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô Queue ‡∏Å‡πà‡∏≠‡∏ô
```

### üß† Challenge: Predict the Order
```javascript
console.log("1");

setTimeout(() => console.log("2"), 1000);
setTimeout(() => console.log("3"), 0);

console.log("4");
```

::: details ‚ú® ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢
```
1 ‚Üí 4 ‚Üí 3 ‚Üí 2
```
1. `"1"` ‚Äî Sync ‚Üí ‡∏ó‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
2. `setTimeout(_, 1000)` ‚Äî ‡∏™‡πà‡∏á‡πÑ‡∏õ Web APIs (‡∏£‡∏≠ 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
3. `setTimeout(_, 0)` ‚Äî ‡∏™‡πà‡∏á‡πÑ‡∏õ Web APIs (‡∏£‡∏≠ 0ms ‡πÅ‡∏ï‡πà‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Queue!)
4. `"4"` ‚Äî Sync ‚Üí ‡∏ó‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
5. Event Loop: Call Stack ‡∏ß‡πà‡∏≤‡∏á ‚Üí ‡∏´‡∏¢‡∏¥‡∏ö `"3"` ‡∏à‡∏≤‡∏Å Queue (0ms ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô)
6. Event Loop: ‡∏´‡∏¢‡∏¥‡∏ö `"2"` ‡∏à‡∏≤‡∏Å Queue (1000ms ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á)
:::

---

## 3. Callbacks (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô "‡πÇ‡∏ó‡∏£‡∏Å‡∏•‡∏±‡∏ö") üìû

**Callback** = ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô Argument ‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏ñ‡∏π‡∏Å **"‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Å‡∏•‡∏±‡∏ö"** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à:

```javascript
// setTimeout ‚Äî Callback ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
function greet() {
    console.log("‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ! (‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)");
}
setTimeout(greet, 2000); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å greet() ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 2 ‡∏ß‡∏¥

// addEventListener ‚Äî Callback ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß!
button.addEventListener("click", function() {
    console.log("‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß!"); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠ "‡∏Ñ‡∏•‡∏¥‡∏Å" ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô
});

// Array methods ‚Äî Callback ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß!
[1, 2, 3].forEach(function(num) {
    console.log(num * 2); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ó‡∏∏‡∏Å element
});
```

### ‚ö†Ô∏è Callback Hell (‡∏ô‡∏£‡∏Å‡∏Ç‡∏≠‡∏á Callback!) üî•

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏á‡∏≤‡∏ô Async ‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏±‡πâ‡∏ô‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô ‚Üí ‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô **"‡∏û‡∏µ‡∏£‡∏∞‡∏°‡∏¥‡∏î‡∏°‡∏£‡∏ì‡∏∞"**:

```javascript
// ‚ùå Callback Hell!
getUser(userId, function(user) {
    getOrders(user.id, function(orders) {
        getOrderDetails(orders[0].id, function(details) {
            getShipping(details.shippingId, function(shipping) {
                console.log(shipping.status);
                // üò± ‡∏ã‡πâ‡∏≠‡∏ô‡∏•‡∏∂‡∏Å‡∏°‡∏≤‡∏Å! ‡∏≠‡πà‡∏≤‡∏ô‡∏¢‡∏≤‡∏Å ‡∏î‡∏π‡πÅ‡∏•‡∏¢‡∏≤‡∏Å!
            });
        });
    });
});
```

```
Callback Hell (‡∏û‡∏µ‡∏£‡∏∞‡∏°‡∏¥‡∏î‡∏°‡∏£‡∏ì‡∏∞):

getUser(id, function(user) {
    ‚ï∞‚îÄ‚îÄ getOrders(user.id, function(orders) {
            ‚ï∞‚îÄ‚îÄ getDetails(orders[0].id, function(details) {
                    ‚ï∞‚îÄ‚îÄ getShipping(details.id, function(shipping) {
                            ‚ï∞‚îÄ‚îÄ üò± ‡∏ã‡πâ‡∏≠‡∏ô‡∏•‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏ö!
                        });
                    });
                });
            });
```

> **‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ Callback Hell ‚Üí ‡πÉ‡∏ä‡πâ Promise! (‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡∏ö‡∏ó‡∏ñ‡∏±‡∏î‡πÑ‡∏õ)**

---

## 4. setTimeout & setInterval ‚è±Ô∏è

### `setTimeout()` ‚Äî ‡∏ó‡∏≥‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î:

```javascript
// setTimeout(callback, milliseconds)
// 1000ms = 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

const timerId = setTimeout(() => {
    console.log("‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!");
}, 3000); // ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

// ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å Timer ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤:
clearTimeout(timerId);
console.log("‚ùå Timer ‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å!");
```

### `setInterval()` ‚Äî ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤:

```javascript
let count = 0;
const intervalId = setInterval(() => {
    count++;
    console.log(`Tick ${count} ‚è±Ô∏è`);

    if (count >= 5) {
        clearInterval(intervalId); // ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö 5 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        console.log("‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß!");
    }
}, 1000);

// Output (‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ):
// Tick 1 ‚è±Ô∏è
// Tick 2 ‚è±Ô∏è
// Tick 3 ‚è±Ô∏è
// Tick 4 ‚è±Ô∏è
// Tick 5 ‚è±Ô∏è
// ‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß!
```

### üìä setTimeout vs setInterval

| | `setTimeout` | `setInterval` |
|:--|:------------|:-------------|
| **‡∏ó‡∏≥‡∏Å‡∏µ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á** | **1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á** | **‡∏ã‡πâ‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ** |
| **‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å** | `clearTimeout(id)` | `clearInterval(id)` |
| **‡πÉ‡∏ä‡πâ‡∏ó‡∏≥** | Delay, Debounce | Countdown, Polling, Animation |

---

## 5. Practical Patterns üõ†Ô∏è

### Debounce ‚Äî ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤:

```javascript
let timer;

searchInput.addEventListener("input", (e) => {
    clearTimeout(timer); // ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å Timer ‡πÄ‡∏Å‡πà‡∏≤

    timer = setTimeout(() => {
        console.log("üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤:", e.target.value);
        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
    }, 500); // ‡∏£‡∏≠ 500ms ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏¥‡∏°‡∏û‡πå
});

// ‚úÖ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: ‡πÑ‡∏°‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ ‡πÅ‡∏ï‡πà‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏¥‡∏°‡∏û‡πå 0.5 ‡∏ß‡∏¥‡∏Å‡πà‡∏≠‡∏ô!
```

### Countdown Timer:

```javascript
function startCountdown(seconds) {
    let remaining = seconds;

    const display = document.querySelector("#timer");
    display.textContent = remaining;

    const intervalId = setInterval(() => {
        remaining--;
        display.textContent = remaining;

        if (remaining <= 0) {
            clearInterval(intervalId);
            display.textContent = "‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤!";
        }
    }, 1000);
}

startCountdown(10); // ‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
```

---

## 6. Microtasks vs Macrotasks üî¨

‡∏°‡∏µ Queue 2 ‡πÅ‡∏ö‡∏ö:

```javascript
console.log("1. Sync");

setTimeout(() => console.log("4. Macrotask (setTimeout)"), 0);

Promise.resolve().then(() => console.log("3. Microtask (Promise)"));

console.log("2. Sync");

// Output: 1 ‚Üí 2 ‚Üí 3 ‚Üí 4
// ‚ö†Ô∏è Microtask (Promise) ‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô Macrotask (setTimeout) ‡πÄ‡∏™‡∏°‡∏≠!
```

### üìä Queue Priority

| Priority | ‡∏ä‡∏∑‡πà‡∏≠ | ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á | ‡∏ó‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠ |
|:--------:|:-----|:---------|:-------|
| ü•á 1 | **Call Stack** | Sync code | ‡∏ó‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ |
| ü•à 2 | **Microtask Queue** | `Promise.then`, `queueMicrotask` | ‡∏´‡∏•‡∏±‡∏á Sync ‡πÅ‡∏ï‡πà‡∏Å‡πà‡∏≠‡∏ô Macrotask |
| ü•â 3 | **Macrotask Queue** | `setTimeout`, `setInterval` | ‡∏´‡∏•‡∏±‡∏á Microtask |

---

## 7. Challenges üèÜ

### üéØ Challenge 1: setTimeout Quiz
```javascript
for (var i = 0; i < 3; i++) {
    setTimeout(() => console.log(i), 100);
}
```
‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ñ‡∏∑‡∏≠?

::: details ‚ú® ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢
```
3, 3, 3
```
‡πÄ‡∏û‡∏£‡∏≤‡∏∞ `var` ‡πÑ‡∏°‡πà‡∏°‡∏µ Block Scope! ‡πÄ‡∏°‡∏∑‡πà‡∏≠ `setTimeout` ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô `i` ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ 3 ‡πÅ‡∏•‡πâ‡∏ß (Loop ‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß)

**‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:** ‡πÉ‡∏ä‡πâ `let` ‡πÅ‡∏ó‡∏ô `var`:
```javascript
for (let i = 0; i < 3; i++) {
    setTimeout(() => console.log(i), 100);
}
// Output: 0, 1, 2 ‚úÖ
```
:::

### üéØ Challenge 2: Event Loop Order
```javascript
console.log("A");
setTimeout(() => console.log("B"), 0);
Promise.resolve().then(() => console.log("C"));
console.log("D");
```

::: details ‚ú® ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢
```
A ‚Üí D ‚Üí C ‚Üí B
```
1. `"A"` ‚Äî Sync (Call Stack)
2. `setTimeout` ‚Äî ‡∏™‡πà‡∏á‡πÑ‡∏õ Macrotask Queue
3. `Promise.then` ‚Äî ‡∏™‡πà‡∏á‡πÑ‡∏õ Microtask Queue
4. `"D"` ‚Äî Sync (Call Stack)
5. `"C"` ‚Äî Microtask (‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô Macrotask!)
6. `"B"` ‚Äî Macrotask (‡∏ó‡∏≥‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á)
:::

### üéØ Challenge 3: Simple Countdown
‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `countdown(n)` ‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏≤‡∏Å n ‡∏ñ‡∏∂‡∏á 1 ‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå "üéâ GO!":

::: details ‚ú® ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢
```javascript
function countdown(n) {
    let current = n;
    const id = setInterval(() => {
        console.log(current);
        current--;
        if (current < 1) {
            clearInterval(id);
            console.log("üéâ GO!");
        }
    }, 1000);
}

countdown(5);
// 5 ‚Üí 4 ‚Üí 3 ‚Üí 2 ‚Üí 1 ‚Üí üéâ GO!
```
:::

---

> **üìñ ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ (Glossary):**
> *   **Synchronous:** ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö ‡∏ó‡∏µ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô
> *   **Asynchronous:** ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà Block ‚Äî ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô
> *   **Callback:** ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô Argument ‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠ "‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Å‡∏•‡∏±‡∏ö" ‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á
> *   **Event Loop:** ‡∏Å‡∏•‡πÑ‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Call Stack ‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏´‡∏° ‡∏ñ‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏Å‡πá‡∏´‡∏¢‡∏¥‡∏ö‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å Queue ‡∏°‡∏≤‡∏ó‡∏≥
> *   **Call Stack:** ‡∏Å‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥ (LIFO ‚Äî ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô)
> *   **Web APIs:** ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà Browser ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ (Timer, Fetch, DOM Events)
> *   **Callback Queue (Macrotask):** ‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö setTimeout, setInterval
> *   **Microtask Queue:** ‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Promise.then (‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ Macrotask)
> *   **Callback Hell:** ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î‡∏ã‡πâ‡∏≠‡∏ô‡∏•‡∏∂‡∏Å‡∏à‡∏≤‡∏Å Callback ‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏±‡πâ‡∏ô (‡∏û‡∏µ‡∏£‡∏∞‡∏°‡∏¥‡∏î‡∏°‡∏£‡∏ì‡∏∞)
> *   **Debounce:** ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Function
> *   **Single-Threaded:** JavaScript ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà 1 Thread ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô)
> *   **`setTimeout()`:** ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å N ‡∏°‡∏¥‡∏•‡∏•‡∏¥‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

---
üëâ **[‡πÑ‡∏õ‡∏ï‡πà‡∏≠: 07-2 - Promises (‡∏™‡∏±‡∏ç‡∏ç‡∏≤)](/07-02-promises)**
