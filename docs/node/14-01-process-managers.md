# Module 14.1: Process Managers (PM2) ü§ñ

> **"Keep your Node.js alive forever."**

Node.js ‡πÇ‡∏î‡∏¢‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡πá‡∏ô **Single Threaded** ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡∏£‡∏≤‡∏∞‡∏ö‡∏≤‡∏á
‡∏´‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏£‡∏≤ Error ‡πÅ‡∏Ñ‡πà‡∏à‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (Uncaught Exception)... **App ‡∏à‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ! (Crash)** üí•
‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡∏°‡∏≤‡∏Ñ‡∏≠‡∏¢‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà (Restart)... ‡πÄ‡∏ß‡πá‡∏ö‡∏Å‡πá‡∏à‡∏∞‡∏•‡πà‡∏°‡∏¢‡∏≤‡∏ß‡πÜ ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤ Admin ‡∏à‡∏∞‡∏°‡∏≤‡πÄ‡∏´‡πá‡∏ô

‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏´‡πâ‡∏≤‡∏°‡∏£‡∏±‡∏ô `node app.js` ‡∏î‡∏¥‡∏ö‡πÜ ‡πÉ‡∏ô Production ‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î!
‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ **Process Manager** ‡∏°‡∏≤‡∏Ñ‡∏≠‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏•‡∏∞‡∏û‡∏£‡∏∞‡πÄ‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∑‡∏≠ **PM2**

---

## üèóÔ∏è 1. Why PM2? The Problems Solved

### Problem A: Node.js Crashes
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î Error ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ try-catch ‡πÑ‡∏ß‡πâ Node.js process ‡∏à‡∏∞ exit(1) ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
**PM2 Solution**: **Auto Restart** ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà App ‡∏î‡∏±‡∏ö (‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏™‡∏µ‡πâ‡∏¢‡∏ß‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) User ‡πÅ‡∏ó‡∏ö‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ï‡∏±‡∏ß

### Problem B: CPU Utilization
Server ‡πÄ‡∏£‡∏≤‡∏≠‡∏≤‡∏à‡∏°‡∏µ 8 Cores ‡πÅ‡∏ï‡πà Node.js ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà 1 Core (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô Single Thread) ‡∏≠‡∏µ‡∏Å 7 Core ‡∏ß‡πà‡∏≤‡∏á‡∏á‡∏≤‡∏ô!
**PM2 Solution**: **Cluster Mode** ‡∏ä‡πà‡∏ß‡∏¢ clone App ‡πÄ‡∏£‡∏≤‡πÑ‡∏õ‡∏£‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å Core (Performance x8 ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!)

### Problem C: Monitoring & Logs
‡∏Å‡∏≤‡∏£‡∏î‡∏π `console.log` ‡∏Ç‡∏≠‡∏á App ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô background (forever/nohup) ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏¢‡∏≤‡∏Å
**PM2 Solution**: ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö Log Management ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß ‡∏£‡∏ß‡∏° log ‡∏ó‡∏∏‡∏Å process ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

---

## üõ†Ô∏è 2. Installation & Basic Commands

```bash
npm install pm2 -g
```

### Basic Commands
```bash
# Start App (‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ process ‡∏ß‡πà‡∏≤ my-api)
pm2 start app.js --name "my-api"

# List ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ process ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
pm2 list

# Stop/Restart/Delete
pm2 stop my-api    # ‡∏´‡∏¢‡∏∏‡∏î
pm2 restart my-api # ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà (‡∏î‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î)
pm2 delete my-api  # ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å list
```

### Log Management
```bash
# ‡∏î‡∏π log ‡πÅ‡∏ö‡∏ö Realtime (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô tail -f)
pm2 logs

# ‡∏î‡∏π‡πÄ‡∏â‡∏û‡∏≤‡∏∞ process
pm2 logs my-api

# ‡∏•‡πâ‡∏≤‡∏á log ‡∏ó‡∏¥‡πâ‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ñ‡πâ‡∏≤ log file ‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô)
pm2 flush
```

---

## üöÄ 3. Cluster Mode (Load Balancing)

‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏û‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á PM2! ‚ö°
Node.js ‡∏à‡∏∞‡πÅ‡∏ä‡∏£‡πå Port ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (‡πÄ‡∏ä‡πà‡∏ô 3000) ‡πÅ‡∏ï‡πà PM2 ‡∏à‡∏∞‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô Round-Robin Load Balancer ‡πÅ‡∏à‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Process

```bash
# ‡∏£‡∏±‡∏ô max ‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô CPU Core ‡∏ó‡∏µ‡πà‡∏°‡∏µ
pm2 start app.js -i max

# ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
pm2 start app.js -i 4
```

**‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô:**
*   ‡∏ñ‡πâ‡∏≤ Server ‡∏°‡∏µ 4 Cores -> PM2 ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á 4 Processes
*   ‡∏ó‡∏±‡πâ‡∏á 4 ‡∏ï‡∏±‡∏ß‡∏ü‡∏±‡∏á Port 3000 ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô (‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÑ‡∏á? ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ PM2 ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ)
*   **Result**: ‡∏£‡∏±‡∏ö Request ‡πÑ‡∏î‡πâ‡πÄ‡∏¢‡∏≠‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏´‡∏≤‡∏®‡∏≤‡∏•! ‡πÑ‡∏°‡πà‡∏°‡∏µ Downtime ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡∏ß‡∏ô‡∏∂‡∏á‡∏ï‡∏≤‡∏¢ ‡∏≠‡∏µ‡∏Å 3 ‡∏ï‡∏±‡∏ß‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà

---

## üìÑ 4. Ecosystem File (`ecosystem.config.js`)

‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå command ‡∏¢‡∏≤‡∏ß‡πÜ (`pm2 start app.js -i max --name ...`) ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏ô‡∏∏‡∏Å
‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ß‡∏£‡πÄ‡∏Å‡πá‡∏ö Config ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå **Ecosystem File** (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô `package.json` ‡∏Ç‡∏≠‡∏á PM2)

### Create Config
```bash
pm2 ecosystem
```
‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÑ‡∏ü‡∏•‡πå `ecosystem.config.js` ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤

### Configuration Options
```javascript
module.exports = {
  apps : [{
    name: "ecommerce-api",
    script: "./server.js",
    
    // ‚öôÔ∏è Environment Variables
    env: {
      NODE_ENV: "development",
      PORT: 3000
    },
    env_production: {
      NODE_ENV: "production",
      PORT: 8080
    },

    // üöÄ Cluster Mode
    instances: "max",
    exec_mode: "cluster",

    // üîÑ Auto Restart Constraints
    max_memory_restart: "500M", // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏¥‡∏ô Ram ‡πÄ‡∏Å‡∏¥‡∏ô 500MB ‡πÉ‡∏´‡πâ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó (‡∏Å‡∏±‡∏ô Memory Leak)
    
    // ‚è≤Ô∏è Time Handling
    log_date_format: "YYYY-MM-DD HH:mm:ss Z",
    
    // üìÇ Watch Mode (Dev Only)
    // watch: true, 
    // ignore_watch: ["node_modules", "logs"]
  }]
};
```

### Usage
```bash
# Start ‡∏î‡πâ‡∏ß‡∏¢ Config
pm2 start ecosystem.config.js

# Start ‡πÅ‡∏ö‡∏ö Production Env
pm2 start ecosystem.config.js --env production
```

---

## üîÑ 5. Zero Downtime Reload

‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏≤‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á Restart Server ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
‡πÅ‡∏ï‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Restart... **‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏∞‡∏•‡πà‡∏°‡πÑ‡∏õ‡πÅ‡∏õ‡πä‡∏ö‡∏ô‡∏∂‡∏á (Downtime)**! üò±

### Restart vs Reload
*   `pm2 restart app`: ‡∏Ü‡πà‡∏≤ Process ‡∏ó‡∏¥‡πâ‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà (‡∏°‡∏µ Downtime ‡∏™‡∏±‡πâ‡∏ô‡πÜ)
*   `pm2 reload app`: (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Cluster Mode)
    *   PM2 ‡∏à‡∏∞‡∏ó‡∏¢‡∏≠‡∏¢ Restart ‡∏ó‡∏µ‡∏•‡∏∞ Process (Rolling Update)
    *   ‡πÄ‡∏ä‡πà‡∏ô ‡∏°‡∏µ 4 ‡∏ï‡∏±‡∏ß: ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà 1 (‡∏ï‡∏±‡∏ß 2,3,4 ‡∏¢‡∏±‡∏á‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà)... ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏µ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà 2...
    *   **Result**: **Zero Downtime!** User ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏∞‡∏î‡∏∏‡∏î

```bash
pm2 reload ecosystem.config.js
```

---

## üßü 6. Startup Hook (Resurrect)

‡∏ñ‡πâ‡∏≤ Server (Windows/Linux) ‡∏ñ‡∏π‡∏Å Reboot... PM2 ‡∏Å‡πá‡∏à‡∏∞‡∏î‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢!
‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ PM2 ‡∏£‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö OS

```bash
# 1. ‡πÉ‡∏´‡πâ PM2 Gen Command ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ (Copy command ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÑ‡∏õ‡∏£‡∏±‡∏ô‡∏ï‡πà‡∏≠)
pm2 startup

# 2. (‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏±‡∏ô command ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß) Save process ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÑ‡∏ß‡πâ
pm2 save
```
‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ Restart ‡∏Ñ‡∏≠‡∏°... App ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏à‡∏∞‡∏ü‡∏∑‡πâ‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏ä‡∏µ‡∏û‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö! üßü‚Äç‚ôÇÔ∏è

---

## üìä 7. Monitoring

PM2 ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤ Dashboard ‡πÉ‡∏ô Terminal ‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏î‡πâ‡∏ß‡∏¢

```bash
pm2 monit
```
‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô:
*   CPU Usage / Memory Usage ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ Process
*   Realtime Logs

### PM2 Plus (Web Dashboard)
‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö (‡∏Å‡∏£‡∏≤‡∏ü‡∏™‡∏ß‡∏¢‡πÜ + ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏°‡∏•) ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ PM2 Plus ‡πÅ‡∏•‡πâ‡∏ß link ‡∏Å‡∏±‡∏ö Server ‡πÑ‡∏î‡πâ
```bash
pm2 link <public_key> <secret_key>
```

---

## üÜö Comparison: PM2 vs Docker

‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏ñ‡∏≤‡∏°‡∏ß‡πà‡∏≤ "‡πÉ‡∏ä‡πâ Docker ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ PM2 ‡πÑ‡∏´‡∏°?"

*   **Docker**:
    *   ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Environment (OS, Node Version, Dependencies)
    *   Scale ‡∏£‡∏∞‡∏î‡∏±‡∏ö Container (‡∏Ç‡πâ‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á Server ‡πÑ‡∏î‡πâ - Orchestration)
    *   *‡πÇ‡∏î‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥ Docker Container ‡∏à‡∏∞‡∏£‡∏±‡∏ô 1 Process*
    
*   **PM2**:
    *   ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Node.js Process ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô OS (‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Container ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ)
    *   ‡πÉ‡∏ä‡πâ Cluster Mode ‡πÉ‡∏ô Container ‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ CPU ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤
    
**Best Practice**:
1.  **Simple Deploy**: ‡πÉ‡∏ä‡πâ PM2 ‡∏ö‡∏ô VPS (EC2/DigitalOcean) -> ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡πá‡∏ß
2.  **Containerized**: ‡πÉ‡∏ä‡πâ Docker ‡∏Ñ‡∏£‡∏≠‡∏ö PM2 ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ (`CMD ["pm2-runtime", "ecosystem.config.js"]`)
    *   *Note: ‡πÉ‡∏ä‡πâ `pm2-runtime` ‡πÅ‡∏ó‡∏ô `pm2 start` ‡πÉ‡∏ô Docker ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô Container ‡∏î‡∏±‡∏ö*

---

## ‚ö° Challenge: Stress Test
‡∏•‡∏≠‡∏á‡∏¢‡∏¥‡∏á‡∏ñ‡∏•‡πà‡∏° Server ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤ PM2 ‡∏ä‡πà‡∏ß‡∏¢ Load Balance ‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏´‡∏°?
1.  ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Route ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏´‡∏ô‡∏±‡∏Å‡πÜ (‡πÄ‡∏ä‡πà‡∏ô loop 10 ‡∏•‡πâ‡∏≤‡∏ô‡∏£‡∏≠‡∏ö)
2.  Start ‡πÅ‡∏ö‡∏ö 1 instance ‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏¥‡∏á 2 request ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô -> ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà 2 ‡∏£‡∏≠‡∏ô‡∏≤‡∏ô‡∏°‡∏≤‡∏Å (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡∏¥‡∏î Blocking)
3.  Start ‡πÅ‡∏ö‡∏ö Cluster Mode (4 instances) -> ‡∏¢‡∏¥‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô -> ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà!

---

## üìö FAQ

**Q: Logs ‡∏Ç‡∏≠‡∏á PM2 ‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô?**
A: ‡πÇ‡∏î‡∏¢ default ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà `~/.pm2/logs/` (Linux/Mac) ‡∏´‡∏£‡∏∑‡∏≠ `C:\Users\User\.pm2\logs\` (Windows)
‡∏Ñ‡∏ß‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á `pm2-logrotate` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ö‡∏ß‡∏°‡∏à‡∏ô Disk ‡πÄ‡∏ï‡πá‡∏°

**Q: `max_memory_restart` ‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏∞‡πÑ‡∏£?**
A: Node.js ‡∏ö‡∏≤‡∏á‡∏ó‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏î‡∏µ‡∏°‡∏µ Memory Leak (‡πÅ‡∏£‡∏°‡∏ö‡∏ß‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ)
PM2 ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏ù‡πâ‡∏≤‡πÉ‡∏´‡πâ ‡∏ñ‡πâ‡∏≤‡∏Å‡∏¥‡∏ô‡πÅ‡∏£‡∏°‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡∏à‡∏∞ Restart ‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ ‡πÅ‡∏ï‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ Server ‡πÑ‡∏°‡πà‡∏ï‡∏≤‡∏¢)

---

## üîó References
- [PM2 Official Docs](https://pm2.keymetrics.io/docs/usage/quick-start/)
- [Shutdown with Grace](https://pm2.keymetrics.io/docs/usage/signals-clean-restart/) - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Graceful Shutdown
- [Node.js Clustering](https://nodejs.org/api/cluster.html) - ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

> üëâ **‡∏ö‡∏ó‡∏ï‡πà‡∏≠‡πÑ‡∏õ: [Module 14.2 - Deployment Strategies (CI/CD)](/node/14-02-deployment-strategies)**
