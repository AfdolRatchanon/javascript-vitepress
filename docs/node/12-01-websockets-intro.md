# 12-01: Introduction to WebSockets ðŸ”Œ

> *"HTTP is like a walkie-talkie (one speaks, over). WebSockets is like a phone call (both speak at the same time)."*

à¸•à¸±à¹‰à¸‡à¹à¸•à¹ˆ Module 1-11 à¹€à¸£à¸²à¹ƒà¸Šà¹‰ **HTTP** à¸¡à¸²à¸•à¸¥à¸­à¸”
à¸‹à¸¶à¹ˆà¸‡ HTTP à¸¡à¸µà¸‚à¹‰à¸­à¸ˆà¸³à¸à¸±à¸”à¸„à¸·à¸­: **Client à¸•à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¸„à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸‚à¸­ (Request) à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™** Server à¸–à¸¶à¸‡à¸ˆà¸°à¸•à¸­à¸š (Response) ðŸ¥º

à¸–à¹‰à¸²à¹€à¸£à¸²à¸­à¸¢à¸²à¸à¸—à¸³ Chat App à¸«à¸£à¸·à¸­à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™ Real-time...
Server à¸ˆà¸°à¸£à¸¹à¹‰à¹„à¸”à¹‰à¸¢à¸±à¸‡à¹„à¸‡à¸§à¹ˆà¸² "à¸¡à¸µà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸«à¸¡à¹ˆà¸¡à¸²à¹à¸¥à¹‰à¸§à¸™à¸°"?
- **à¸§à¸´à¸˜à¸µà¹€à¸à¹ˆà¸² (Polling)**: Client à¸–à¸²à¸¡ Server à¸—à¸¸à¸ 1 à¸§à¸´à¸™à¸²à¸—à¸µ "à¸¡à¸µà¹„à¸£à¸›à¹ˆà¸²à¸§? à¸¡à¸µà¹„à¸£à¸›à¹ˆà¸²à¸§?" (à¹€à¸›à¸¥à¸·à¸­à¸‡ Resource à¸¡à¸²à¸)
- **à¸§à¸´à¸˜à¸µà¹ƒà¸«à¸¡à¹ˆ (WebSocket)**: à¸•à¹ˆà¸­à¸—à¹ˆà¸­à¸„à¹‰à¸²à¸‡à¹„à¸§à¹‰à¹€à¸¥à¸¢ Server à¸¡à¸µà¸­à¸°à¹„à¸£à¸à¹‡à¸ªà¹ˆà¸‡à¸¡à¸²à¹„à¸”à¹‰à¸—à¸±à¸™à¸—à¸µ! ðŸš€


## ðŸ†š HTTP vs WebSocket

| Feature | HTTP | WebSocket |
|:---|:---|:---|
| **Communication** | Half-Duplex (à¸œà¸¥à¸±à¸”à¸à¸±à¸™à¸žà¸¹à¸”) | Full-Duplex (à¸žà¸¹à¸”à¸ªà¸§à¸™à¸à¸±à¸™à¹„à¸”à¹‰) |
| **Connection** | à¹€à¸›à¸´à¸”à¹à¸¥à¹‰à¸§à¸›à¸´à¸”à¸—à¸±à¸™à¸—à¸µ (Stateless) | à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸„à¹‰à¸² (Persistent) |
| **Overhead** | Header à¹€à¸¢à¸­à¸° (Cookie, User-Agent) | Header à¸™à¹‰à¸­à¸¢à¸¡à¸²à¸ (à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸ Handshake) |
| **Use Case** | REST API, Web Page | Chat, Game, Trade, Live stream |


## ðŸ¤ The Handshake

WebSocket à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸­à¸¢à¸¹à¹ˆà¸”à¸µà¹† à¸à¹‡à¹€à¸à¸´à¸”à¸‚à¸¶à¹‰à¸™... à¸¡à¸±à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸ˆà¸²à¸ HTTP à¸à¹ˆà¸­à¸™
1.  **Client**: à¸ªà¹ˆà¸‡ HTTP Request "à¸‚à¸­à¸­à¸±à¸žà¹€à¸à¸£à¸”à¹€à¸›à¹‡à¸™ WebSocket à¸™à¸°" (`Upgrade: websocket`)
2.  **Server**: à¸•à¸­à¸šà¸à¸¥à¸±à¸š "à¹‚à¸­à¹€à¸„ à¸ˆà¸±à¸”à¹„à¸›" (`101 Switching Protocols`)
3.  **Connection Established**: à¸—à¹ˆà¸­à¸–à¸¹à¸à¸ªà¸£à¹‰à¸²à¸‡à¸‚à¸¶à¹‰à¸™ à¸—à¸±à¹‰à¸‡à¸„à¸¹à¹ˆà¸„à¸¸à¸¢à¸à¸±à¸™à¸œà¹ˆà¸²à¸™à¸—à¹ˆà¸­à¸™à¸µà¹‰à¹„à¸”à¹‰à¸•à¸¥à¸­à¸”à¹„à¸› (à¸ˆà¸™à¸à¸§à¹ˆà¸²à¸ˆà¸°à¹€à¸™à¹‡à¸•à¸«à¸¥à¸¸à¸”)


## ðŸ› ï¸ Native vs Libraries

Node.js à¸¡à¸µ Module `ws` à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™ low-level websocket
à¹à¸•à¹ˆà¹ƒà¸™à¸„à¸­à¸£à¹Œà¸ªà¸™à¸µà¹‰à¹€à¸£à¸²à¸ˆà¸°à¹ƒà¸Šà¹‰ **Socket.IO** ðŸŸ¢
à¹€à¸žà¸£à¸²à¸°:
- **Auto Reconnect**: à¹€à¸™à¹‡à¸•à¸«à¸¥à¸¸à¸” à¸¡à¸±à¸™à¸•à¹ˆà¸­à¹ƒà¸«à¹‰à¹€à¸­à¸‡
- **Fallback**: à¸–à¹‰à¸² Browser à¹„à¸¡à¹ˆà¸£à¸­à¸‡à¸£à¸±à¸š WebSocket à¸¡à¸±à¸™à¸ˆà¸°à¸–à¸­à¸¢à¹„à¸›à¹ƒà¸Šà¹‰ HTTP Long Polling à¹ƒà¸«à¹‰à¹€à¸­à¸‡ (à¹€à¸ˆà¹‹à¸‡à¹€à¸›à¹‰à¸‡!)
- **Rooms/Namespaces**: à¸ˆà¸±à¸”à¸à¸¥à¸¸à¹ˆà¸¡à¸„à¸™à¸„à¸¸à¸¢à¸à¸±à¸™à¸‡à¹ˆà¸²à¸¢


## ðŸ“š Glossary

| à¸„à¸³à¸¨à¸±à¸žà¸—à¹Œ | à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢ |
|:--------|:---------|
| **Full-Duplex** | à¸à¸²à¸£à¸ªà¸·à¹ˆà¸­à¸ªà¸²à¸£à¸ªà¸­à¸‡à¸—à¸´à¸¨à¸—à¸²à¸‡à¸žà¸£à¹‰à¸­à¸¡à¸à¸±à¸™ (à¹€à¸«à¸¡à¸·à¸­à¸™à¸„à¸¸à¸¢à¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ) |
| **Real-time** | à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸ªà¹ˆà¸‡à¸–à¸¶à¸‡à¸œà¸¹à¹‰à¸£à¸±à¸šà¹à¸—à¸šà¸ˆà¸°à¸—à¸±à¸™à¸—à¸µ (Latency à¸•à¹ˆà¸³à¸¡à¸²à¸) |
| **Handshake** | à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸—à¸±à¸à¸—à¸²à¸¢à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¹€à¸žà¸·à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡ Connection |
| **Long Polling** | à¹€à¸—à¸„à¸™à¸´à¸„à¸ˆà¸³à¸¥à¸­à¸‡ Real-time à¹‚à¸”à¸¢à¸à¸²à¸£à¹€à¸›à¸´à¸” Request à¸„à¹‰à¸²à¸‡à¹„à¸§à¹‰à¸™à¸²à¸™à¹† (à¸§à¸´à¸˜à¸µà¹‚à¸šà¸£à¸²à¸“) |


> ðŸ‘‰ **à¹„à¸›à¸•à¹ˆà¸­: [Real-time with Socket.IO](/node/12-02-socket-io)**
